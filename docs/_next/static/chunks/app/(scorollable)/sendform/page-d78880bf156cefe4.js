(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[853],{8353:function(e,t,a){Promise.resolve().then(a.bind(a,3729))},3729:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var r=a(7437),n=a(2265),s=a(6673),i=a(5053),l=a.n(i);function o(e){let{annotation:t,setAnnotation:a,dateOfShooting:s,setDateOfShooting:i,area:l,setArea:o,areaList:c,maxDosLength:d,maxAntLength:m}=e,[h,u]=(0,n.useState)("0/".concat(d)),[x,g]=(0,n.useState)("0/".concat(m)),[f,b]=(0,n.useState)("text-gray-400"),[p,y]=(0,n.useState)("text-gray-400"),v=e=>{let t,r,n,s;let l=e.target.value,c=e.target.name;if("dos"===c)r=i,t=d,n=u,s=b;else if("area"===c){o(l);return}else t=m,r=a,n=g,s=y;r(l),n("".concat(l.length,"/").concat(t)),s(l.length>t?"text-red-400":"text-gray-400")};return(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsxs)("div",{className:"flex mb-3 border-dashed border-2 border-gray-300 bg-gray-200 text-gray-400 max-w-xs",children:[(0,r.jsx)("input",{className:"w-full",name:"dos",type:"text",value:s,onChange:v,placeholder:"撮影日（例：1999年春ごろ）"}),(0,r.jsx)("div",{className:"px-2 ".concat(f),children:h})]}),(0,r.jsx)("div",{className:"flex mb-4 border-dashed border-2 border-gray-300 bg-gray-200 text-gray-400 max-w-xs",children:(0,r.jsxs)("select",{className:"w-full",name:"area",onChange:v,children:[(0,r.jsx)("option",{value:"",children:"撮影地域（５０音順）"}),c.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})}),(0,r.jsxs)("div",{className:"flex mb-4 border-dashed border-2 border-gray-300 bg-gray-200 max-w-[36rem]",children:[(0,r.jsx)("textarea",{className:"w-full h-full",rows:5,cols:10,name:"ant",value:t,onChange:v,placeholder:"書きたいことをご自由に。（最大４００文字）"}),(0,r.jsx)("div",{className:"px-2 ".concat(p),children:x})]})]})}var c=a(9169),d=a(2815);function m(){let e;let[t,a]=(0,n.useState)(""),[i,m]=(0,n.useState)(""),[h,u]=(0,n.useState)(""),[x,g]=(0,n.useState)(""),[f,b]=(0,n.useState)(""),[p,y]=(0,n.useState)(),[v,j]=(0,n.useState)(""),[w,N]=(0,n.useState)(null),[S,_]=(0,n.useState)(null);(0,n.useEffect)(()=>{!function(){let e=document.querySelector("canvas");if(N(e),!e)return;let t=e.getContext("2d");if(_(t),!t)return;let a=e.parentElement;a&&(e.width=a.clientWidth,e.height=a.clientHeight)}()},[]);let{getRootProps:z,getInputProps:k,acceptedFiles:C}=(0,s.uI)({onDrop:e=>{e.forEach(e=>{let t=URL.createObjectURL(e);b(t),y(e)})},accept:{"image/jpeg":[".jpeg",".jpg"],"image/png":[".png"],"image/gif":[".gif"],"image/bmp":[".bmp"],"image/webp":[".webp"],"image/svg+xml":[".svg"]}});async function E(){let t=function(){let e=h.length<=400;if(!e)return"文章は".concat(400,"文字以内で入力してください。");let t=x.length>0&&x.length<=16;return t?i?p&&""!==f?"":"画像をアップロードしてください。":"撮影地域を選んでください。":"撮影日時は".concat(16,"文字以内で入力してください。")}();if(t){a(t);return}a(""),j("true");let r=new(l());r.append("file",p),r.append("annotation",h),r.append("area",i),r.append("dateOfShooting",x);try{u(""),b(""),j(""),function(){let e=".thanks_container",t=d.ZP.timeline();t.set(e,{opacity:0,transform:"scaleX(0.025) translateY(30px)"}).to(e,{opacity:1,transform:"scaleX(0.025) translateY(0)",duration:.2}).to(e,{"pointer-events":"auto",transform:"scaleX(1)",duration:.3})}(),-1===O&&((e=new Image).src="/components/heart_effect.svg",e.onload=function(){for(let e=0;e<100;e++){if(!w)return;let e={x:w.width/2,y:w.height/2,vx:4*Math.random()-2,vy:4*Math.random()-2,size:25*Math.random()+5},t=120*Math.random()+30;e.x+=e.vx*t,e.y+=e.vy*t,F.push(e)}(function t(){O=requestAnimationFrame(()=>{w&&S&&(S.clearRect(0,0,w.width,w.height),F.forEach(t=>{if(!w||!S)return;t.x+=t.vx,t.y+=t.vy;let a={x:t.x<0-t.size||t.x>w.width+t.size,y:t.y<0-t.size||t.y>w.height+t.size};(a.x||a.y)&&(t.x=w.width/2,t.y=w.height/2,t.vx=4*Math.random()-2,t.vy=4*Math.random()-2),S.drawImage(e,t.x,t.y,t.size,t.size)}),t())})})()})}catch(e){console.error("エラーが発生しました:")}}let F=[],O=-1;return(0,r.jsxs)("div",{className:"justify-center items-center bg-[#F0F0F0] py-12 w-full min-h-screen",children:[(0,r.jsxs)("div",{className:"relative mx-auto max-w-screen-sm my-6",children:[v?(0,r.jsx)("div",{className:"flex items-center justify-center absolute w-full h-full bg-gray-400 z-50 bg-opacity-60",children:(0,r.jsx)("div",{className:"loadingCircle"})}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)("div",{className:"relative px-[0.75em] py-[0.4em] font-bold mb-3 border-dashed border-b-2 border-white bg-blue-400 text-white shadow-md",children:"投稿フォーム"}),(0,r.jsx)("div",{...z(),className:"flex min-h-[20rem] mx-auto mb-6 border-dashed border-2 border-gray-300 bg-gray-200 text-gray-400 max-w-screen-sm flex items-center justify-center cursor-pointer",children:f?(0,r.jsx)("img",{src:f,alt:"ドロップされた画像"}):(0,r.jsxs)("div",{className:"border border-dashed p-4 text-center",children:[(0,r.jsx)("input",{...k()}),(0,r.jsx)("p",{children:"ここをクリックしてファイルを選択もしくはドラッグ&ドロップ"})]})}),(0,r.jsx)(o,{annotation:h,setAnnotation:u,area:i,setArea:m,dateOfShooting:x,setDateOfShooting:g,maxDosLength:16,maxAntLength:400,areaList:c}),t?(0,r.jsx)("div",{className:"px-[0.75em] py-[0.4em] font-bold text-white bg-red-400 border-solid border-2 border-gray-500 mb-3",children:t}):(0,r.jsx)(r.Fragment,{}),(0,r.jsx)("button",{className:"relative px-[0.75em] py-[0.4em] font-bold mb-3 bg-blue-400 border-dashed border-b-2 border-white text-white shadow-md",onClick:E,children:"投稿する"})]}),(0,r.jsx)("div",{className:"flex fixed pointer-events-none w-[30%] h-[100%] inset-0 mx-auto justify-center items-center",children:(0,r.jsx)("div",{className:"thanks_container relative w-full pt-[100%] opacity-0 flex-col border-dashed bg-gray-50 border-4 border-blue-400 justify-center  p-6 overflow-hidden",onClick:function(e){e.stopPropagation(),cancelAnimationFrame(O),O=-1;let t=".thanks_container",a=d.ZP.timeline();a.to(t,{transform:"scaleX(0.025)",duration:.2}).to(t,{opacity:0,transform:"scaleX(0) translateY(30px)",duration:.3}).set(t,{"pointer-events":"none"})},children:(0,r.jsxs)("div",{className:"absolute top-0 left-0 w-full h-full",children:[(0,r.jsx)("canvas",{className:"absolute z-10"}),(0,r.jsx)("img",{src:"/components/bing_thanks_rabbit.webp",className:"relative z-20 w-[75%] h-[75%] mx-auto"}),(0,r.jsxs)("p",{className:"relative z-20 font-bold text-lg text-center mx-auto",children:[i,"の写真が投稿されました！",(0,r.jsx)("br",{}),"ありがとうございます！"]})]})})})]})}},9169:function(e){"use strict";e.exports=JSON.parse('["鳥犬車","山川花","魚鳥星","木石月","風雨日","川山虫","雲水草","猫犬鳥","火木星","海山魚","星虫石","猫笛苗","花風月","鳥猫車","虫風水","火川草","山海木","星虫雨","犬車川","魚風日","山火鳥","月雲石","水花星","虫川猫","鳥日風","車水山","石海木","星火虫","風草犬","花川月","雨猫魚"]')}},function(e){e.O(0,[922,815,688,971,596,744],function(){return e(e.s=8353)}),_N_E=e.O()}]);